{% extends 'base.html' %}
{% block content %}

<!--button for add users-->
<div class="text-center">
      
    <button type="button" class = "text-white btn-lg mt-4 mb-3 bg-primary-light" data-toggle="modal" data-target="#exampleModalCenter1"> Add Country</button>
    {% with messages = get_flashed_messages() %}
    {% if messages %}
       <div class="notification is-danger text-maroon">
           {{ messages[0] }}
       </div>
     {% endif %}
   {% endwith %}    
</div>
<!--modal linked to add user button-->
<div class="modal fade" id="exampleModalCenter1" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenter1Title" aria-hidden="true">
<div class="modal-dialog modal-dialog-centered" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="exampleModalLongTitle">Add Country Form</h5>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
       <form  action="{{ url_for('countries.add_country') }}" method="POST">
           <label for="cn1">Country Name</label>
           <input type="Enter username" name="cn1" required="1">
           <br>
           
           <button type="save" class="btn btn-primary">Add Country</button>
   
       </form>
    </div>
    <div class="modal-footer">
     
      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
     
    </div>
  </div>
</div>
</div>


<!--create table of all countries-->
<div class="container -sm">
    <table class="table table-striped">
     <thead>
         <tr>
             <th scope="col">ID </th>
             <th scope="col">Country</th>
             <th></th>
             <th></th>
         </tr>
     </thead>
     <tbody>
         {% for country in country %}
         <tr>
             <th scope="row">{{country.id}}</th>
             <td>{{country.name}}</td>
             
             <!--Edit button-->
             <td><button type="submit" class="btn-sm btn-block bg-primary-light text-white" data-toggle="modal" data-target="#{{country.id}}" data_id="{{country.id}}"> Edit</button></td>
             <!--edit form-->
             <div class="modal fade" id="{{country.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                 <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLongTitle">Edit Country Form</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                       <form action="{{ url_for('countries.edit_country', id = country.id)}}" method="POST" enctype="multipart/form-data">
                           <label for="cn">Country Name</label>                                   
                           <input type="text" name="cn" value="{{country.name}}">
                           <br>
                           
                           <button type="save" class="btn btn-primary">Edit</button>                                                                 
                       </form>
                    </div>
                    <div class="modal-footer">              
                     
                      <button class="btn btn-secondary" data-dismiss="modal">Close</button>
                     
                    </div>
                  </div>
                </div>
              </div>
              <!--delete button-->
               <td><form action="{{ url_for('countries.delete', id = country.id) }}" method="GET"><button class=" btn-danger" onclick="{if(confirm('Are you sure you want to delete this record?')){this.document.formname.submit();return true;}return false;}">Delete</button></form></td>
            </tr>
           {% endfor %}
       </tbody>
   </table>
   </div>

{% endblock %}